<app-header-admin></app-header-admin>
<style>
  th,
  td,
  span {
    text-align: center;
    font-size: 14px;
  }

  th {
    background: rgb(39, 148, 182);
  }
</style>
<br><br><br>
<div class="section section-nucleo-icons">
  <div class="container align-items-center">
    <div class="row">
      <div class="col-lg-12 col-md-12 ml-auto mr-auto">

        <div class="card card-coin card-plain">
          <div class="card-header">

            <h4 class="title">Liste des utilisateurs</h4>

          </div>
          <div class="card-body">

            <div class="text-right col-md-12">
              <button class="btn " style="background: rgb(76, 156, 115);" class="btn " data-target="#myModal2"
                (click)="myModal2.show()" type="button">

                <i class="tim-icons  icon-simple-add"></i> Nouvelle admin
              </button></div>

            <div class="table-responsive">
              <div class="col-lg-12 col-md-12 ml-auto mr-auto">

                <table class="table table-striped tablesorter" [svData]="users" #svs="svDataTable" [svRowsOnPage]="5"
                  svSortBy="name" svSortOrder="asc">

                  <thead>
                    <tr>
                      <th>
                        <sv-default-sorter class="text-white" by="name"><span>Nom</span></sv-default-sorter>
                      </th>
                      <th>
                        <sv-default-sorter class="text-white" by="username"><span>Username</span></sv-default-sorter>
                      </th>


                      <th>
                        <sv-default-sorter class="text-white" by="phone"><span>Phone</span></sv-default-sorter>
                      </th>
                      <th>
                        <sv-default-sorter class="text-white" by="role"><span>Role</span></sv-default-sorter>
                      </th>
                      <th>
                        <sv-default-sorter class="text-white" by="enable"><span>Etat</span></sv-default-sorter>
                      </th>
                      <th>
                      </th>

                    </tr>
                  </thead>
                  <tbody>
                    <tr *ngFor="let item of svs.data">
                      <td>{{ item.name }}</td>
                      <td>{{ item.username }}</td>
                      <td>{{ item.phone  }}</td>
                      <td>{{ item.roles  }}</td>
                      <td>{{ item.enable  }}</td>
                      <td> <button class="btn" style="background: rgb(211, 111, 62);" data-target="#myModal3"
                          (click)="edit(item,myModal3)" type="button">

                          modifier
                        </button></td>


                    </tr>
                  </tbody>
                  <tfoot>
                    <tr>
                      <td colspan="7">
                        <sv-bootstrap-paginator [rowsOnPageSet]="[5, 10, 25]"></sv-bootstrap-paginator>
                      </td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </div>


          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<br>





<div aria-hidden="true" aria-labelledby="myModalLabel" bsModal class="modal fade modal-black" #myModal2="bs-modal"
  id="myModal2" role="dialog" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header justify-content-center">
        <button aria-hidden="true" class="close" data-dismiss="modal" (click)="myModal2.hide()" type="button">
          <i class="tim-icons icon-simple-remove text-white"> </i>
        </button>
        <div class="text-muted text-center ml-auto mr-auto">
          <h3 class="mb-0">Ajouter Admin</h3>
        </div>
      </div>
      <div class="modal-body">
        <form role="form" #myform="ngForm" (ngSubmit)="onSubmit(myform,myModal2)" ngNativeValidate>
          <div class="form-group mb-3">
            <div class="input-group input-group-alternative" [ngClass]="{ 'input-group-focus': focus1 === true }">
              <div class="input-group-prepend">
                <span class="input-group-text">
                  <i class="tim-icons icon-badge "> </i>
                </span>
              </div>
              <input name="name" class="form-control" placeholder="Nom" minlength="3" type="text" ngModel required
                (focus)="focus1 = true" (blur)="focus1 = false" />
            </div>
          </div>
          <div class="form-group mb-3">
            <div class="input-group input-group-alternative" [ngClass]="{ 'input-group-focus': focus2 === true }">
              <div class="input-group-prepend">
                <span class="input-group-text">
                  <i class="tim-icons icon-single-02 "> </i>
                </span>
              </div>
              <input name="username" class="form-control" placeholder="Username" minlength="3" type="text" ngModel required
                (focus)="focus2 = true" (blur)="focus2 = false" />
            </div>
          </div>
          <div class="form-group mb-3">
            <div class="input-group input-group-alternative" [ngClass]="{ 'input-group-focus': focus3 === true }">
              <div class="input-group-prepend">
                <span class="input-group-text">
                  <i class="tim-icons icon-mobile"> </i>
                </span>
              </div>
              <input name="phone" class="form-control" placeholder="Telephone" minlength="8" maxlength="8" type="text" ngModel required
                (focus)="focus3 = true" (blur)="focus3 = false" />
            </div>
          </div>
          <div class="form-group">
            <div class="input-group input-group-alternative" [ngClass]="{ 'input-group-focus': focus5 === true }">
              <div class="input-group-prepend">
                <span class="input-group-text">
                  <i class="tim-icons icon-key-25"> </i>
                </span>
              </div>
              <input name="password" class="form-control" placeholder="Password" minlength="6" type="password" ngModel required
                (focus)="focus5 = true" (blur)="focus5 = false" />
            </div>
            <div class="form-group mb-3">
              <div class="input-group input-group-alternative" [ngClass]="{ 'input-group-focus': focus4 === true }">
                <div class="input-group-prepend">
                  <span class="input-group-text">
                    <i class="tim-icons icon-lock-circle"> </i>
                  </span>
                </div>

                <select ngModel required (focus)="focus4 = true" (blur)="focus4 = false" name="enable"
                  class="form-control">
                  <option style="color: black;" value="true">Activer</option>
                  <option style="color: black;" value="false">Désactiver</option>


                </select>
              </div>
            </div>

          </div>
          <div class="form-group mb-3">
            <div class="input-group input-group-alternative" [ngClass]="{ 'input-group-focus': focus6 === true }">
              <div class="input-group-prepend">
                <span class="input-group-text">
                  <i class="tim-icons icon-settings-gear-63"> </i>
                </span>
              </div>

              <select class="dropdown" dropdown ngModel required (focus)="focus6 = true" (blur)="focus6 = false"
                name="roles" class="form-control">
                <option style="color: black;" value="ROLE_ADMIN_SUP">ADMIN SUPERIEUR</option>
                <option style="color: black;" value="ROLE_ADMIN">ADMIN</option>


              </select>
            </div>
          </div>

          <div class="form-group mb-3">



            <alert *ngIf="isSignUpFailed" class="alert-with-icon" [type]="'warning alert-with-icon'">
              <span class="tim-icons icon-bulb-63" data-notify="icon"> </span>
              <span>
                <b> Signup failed!! - </b> {{errorMessage}}
              </span>
            </alert>
          </div>
          <div class="text-right">
            <button class="btn  btn-round my-1" style="background: rgb(76, 156, 115);" type="submit">
              confirmer
            </button>
            <button class="btn btn-round  my-1" style="background: rgb(211, 111, 62);" (click)="myModal2.hide()"
              type="button">
              annuler
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>



<div aria-hidden="true" aria-labelledby="myModalLabel" bsModal class="modal fade modal-black" #myModal3="bs-modal"
  id="myModal3" role="dialog" tabindex="-1">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header justify-content-center">
        <button aria-hidden="true" class="close" data-dismiss="modal" (click)="myModal3.hide()" type="button">
          <i class="tim-icons icon-simple-remove text-white"> </i>
        </button>
        <div class="text-muted text-center ml-auto mr-auto">
          <h3 class="mb-0">Modifier Admin</h3>
        </div>
      </div>
      <div class="modal-body">
        <form role="form" #myedit="ngForm" (ngSubmit)="onEdit(myedit,myModal3)" ngNativeValidate>
          <div class="form-group mb-3">
            <div class="input-group input-group-alternative" [ngClass]="{ 'input-group-focus': focus1 === true }">
              <div class="input-group-prepend">
                <span class="input-group-text">
                  <i class="tim-icons icon-badge "> </i>
                </span>
              </div>
              <input name="name" class="form-control" placeholder="Nom" type="text" minlength="3"  [(ngModel)]="user.name" required
                (focus)="focus1 = true" (blur)="focus1 = false" />
            </div>
          </div>
          <div class="form-group mb-3">
            <div class="input-group input-group-alternative" [ngClass]="{ 'input-group-focus': focus2 === true }">
              <div class="input-group-prepend">
                <span class="input-group-text">
                  <i class="tim-icons icon-single-02 "> </i>
                </span>
              </div>
              <input name="username" class="form-control" placeholder="Username" minlength="3" [(ngModel)]="user.username"type="text" ngModel required
                (focus)="focus2 = true" (blur)="focus2 = false" />
            </div>
          </div>
          <div class="form-group mb-3">
            <div class="input-group input-group-alternative" [ngClass]="{ 'input-group-focus': focus3 === true }">
              <div class="input-group-prepend">
                <span class="input-group-text">
                  <i class="tim-icons icon-mobile"> </i>
                </span>
              </div>
              <input name="phone" class="form-control" placeholder="Telephone" minlength="8" maxlength="8"[(ngModel)]="user.phone"type="text" ngModel required
                (focus)="focus3 = true" (blur)="focus3 = false" />
            </div>
          </div>
          <div class="form-group">
            <div class="input-group input-group-alternative" [ngClass]="{ 'input-group-focus': focus5 === true }">
              <div class="input-group-prepend">
                <span class="input-group-text">
                  <i class="tim-icons icon-key-25"> </i>
                </span>
              </div>
              <input name="password" class="form-control" placeholder="Password"minlength="6"  [(ngModel)]="user.password" type="password" ngModel required
                (focus)="focus5 = true" (blur)="focus5 = false" />
            </div>
            <div class="form-group mb-3">
              <div class="input-group input-group-alternative" [ngClass]="{ 'input-group-focus': focus4 === true }">
                <div class="input-group-prepend">
                  <span class="input-group-text">
                    <i class="tim-icons icon-settings-gear-63"> </i>
                  </span>
                </div>

                <select [(ngModel)]="user.enable" required (focus)="focus4 = true"  (blur)="focus4 = false" name="enable"
                  class="form-control">
                  <option style="color: black;" value="true">Activer</option>
                  <option style="color: black;" value="false">Désactiver</option>


                </select>
              </div>
            </div>

          </div>
          <div class="form-group mb-3">
            <div class="input-group input-group-alternative" [ngClass]="{ 'input-group-focus': focus6 === true }">
              <div class="input-group-prepend">
                <span class="input-group-text">
                  <i class="tim-icons icon-lock-circle"> </i>
                </span>
              </div>

              <select class="dropdown" dropdown [(ngModel)]="user.roles" required (focus)="focus6 = true" (blur)="focus6 = false"
                name="roles" class="form-control">
                <option style="color: black;" value="ROLE_ADMIN_SUP">ROLE_ADMIN_SUP</option>
                <option style="color: black;" value="ROLE_ADMIN">ROLE_ADMIN</option>


              </select>
            </div>
          </div>

          <div class="form-group mb-3">



            <alert *ngIf="isSignUpFailed" class="alert-with-icon" [type]="'warning alert-with-icon'">
              <span class="tim-icons icon-bulb-63" data-notify="icon"> </span>
              <span>
                <b> Edit failed!! - </b> {{errorMessage}}
              </span>
            </alert>
          </div>
          <div class="text-right">
            <button class="btn  btn-round my-1" style="background: rgb(76, 156, 115);" type="submit">
              confirmer
            </button>
            <button class="btn btn-round  my-1" style="background: rgb(211, 111, 62);" (click)="myModal3.hide()"
              type="button">
              annuler
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>




